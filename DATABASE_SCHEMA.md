# –ü–æ–≤–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö - Legal Graph System

## üìä –û–≥–ª—è–¥ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **–¥–≤—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**:
1. **PostgreSQL** - —Ä–µ–ª—è—Ü—ñ–π–Ω–∞ –ë–î –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
2. **Neo4j** - –≥—Ä–∞—Ñ–æ–≤–∞ –ë–î –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–≤'—è–∑–∫—ñ–≤ —Ç–∞ GraphRAG

---

## üóÑÔ∏è PostgreSQL Schema

### 1. –¢–∞–±–ª–∏—Ü—è `categories` (–ú–Ω–æ–∂–∏–Ω–∏)

**–û–ø–∏—Å:** –¢–æ–ø-—Ä—ñ–≤–Ω–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –∑–∞–∫–æ–Ω–æ–¥–∞–≤—Å—Ç–≤–∞ (–º–Ω–æ–∂–∏–Ω–∞)

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å |
|---------|-----|------|
| `id` | Integer (PK) | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä |
| `name` | String(500) | –ù–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (—É–Ω—ñ–∫–∞–ª—å–Ω–∞, —ñ–Ω–¥–µ–∫—Å–æ–≤–∞–Ω–∞) |
| `description` | Text | –û–ø–∏—Å –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó |
| `element_count` | Integer | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–Ω–æ–∂–∏–Ω–∏ (default: 0) |
| `created_at` | DateTime(timezone) | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |
| `updated_at` | DateTime(timezone) | –î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è |

**–ó–≤'—è–∑–∫–∏:**
- `subsets` ‚Üí –æ–¥–∏–Ω-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –∑ `Subset`
- `act_categories` ‚Üí –æ–¥–∏–Ω-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –∑ `ActCategory`

**–ü—Ä–∏–∫–ª–∞–¥–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π:**
- "–ë–∞–Ω–∫–∏, —Ñ—ñ–Ω–∞–Ω—Å–∏, –∫—Ä–µ–¥–∏—Ç, –±—é–¥–∂–µ—Ç"
- "–ë—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ, –∫–∞–ø—ñ—Ç–∞–ª—å–Ω–∏–π —Ä–µ–º–æ–Ω—Ç, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞"
- "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–∏–π –æ–±–ª—ñ–∫, –æ–ø–æ–¥–∞—Ç–∫—É–≤–∞–Ω–Ω—è, –∞—É–¥–∏—Ç, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –æ–±–ª—ñ–∫ —ñ –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å"

---

### 2. –¢–∞–±–ª–∏—Ü—è `subsets` (–ü—ñ–¥–º–Ω–æ–∂–∏–Ω–∏)

**–û–ø–∏—Å:** –ü—ñ–¥–º–Ω–æ–∂–∏–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (–ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—è)

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å |
|---------|-----|------|
| `id` | Integer (PK) | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä |
| `name` | String(500) | –ù–∞–∑–≤–∞ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏ (—ñ–Ω–¥–µ–∫—Å–æ–≤–∞–Ω–∞) |
| `description` | Text | –û–ø–∏—Å –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏ |
| `category_id` | Integer (FK) | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `categories.id` |
| `element_count` | Integer | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (default: 0) |
| `created_at` | DateTime(timezone) | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |
| `updated_at` | DateTime(timezone) | –î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è |

**–ó–≤'—è–∑–∫–∏:**
- `category` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ –∑ `Category`
- `legal_acts` ‚Üí –æ–¥–∏–Ω-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –∑ `LegalAct`

---

### 3. –¢–∞–±–ª–∏—Ü—è `legal_acts` (–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤—ñ –∞–∫—Ç–∏)

**–û–ø–∏—Å:** –û–∫—Ä–µ–º–∏–π –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤–∏–π –∞–∫—Ç (–µ–ª–µ–º–µ–Ω—Ç –º–Ω–æ–∂–∏–Ω–∏)

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å |
|---------|-----|------|
| `id` | Integer (PK) | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä |
| `nreg` | String(100) | –ù–æ–º–µ—Ä —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó (—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π, —ñ–Ω–¥–µ–∫—Å–æ–≤–∞–Ω–∏–π) |
| `title` | String(1000) | –ù–∞–∑–≤–∞ –∞–∫—Ç—É |
| `text` | Text | –ü–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| `text_json` | JSON | –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π JSON –∑ API –†–∞–¥–∏ |
| `card_json` | JSON | –ö–∞—Ä—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∑ API |
| `document_type` | String(100) | –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| `status` | String(50) | –°—Ç–∞—Ç—É—Å (–¥—ñ—î, –≤—Ç—Ä–∞—Ç–∏–≤ —á–∏–Ω–Ω—ñ—Å—Ç—å, —Ç–æ—â–æ) |
| `date_acceptance` | DateTime(timezone) | –î–∞—Ç–∞ –ø—Ä–∏–π–Ω—è—Ç—Ç—è |
| `date_publication` | DateTime(timezone) | –î–∞—Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó |
| `is_processed` | Boolean | –ß–∏ –æ–±—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (default: False) |
| `processed_at` | DateTime(timezone) | –î–∞—Ç–∞ –æ–±—Ä–æ–±–∫–∏ |
| `subset_id` | Integer (FK) | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `subsets.id` (nullable) |
| `extracted_elements` | JSON | –í–∏–¥—ñ–ª–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –º–Ω–æ–∂–∏–Ω–∏ (–¥–∏–≤. —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∏–∂—á–µ) |
| `extracted_relations` | JSON | –í–∏—è–≤–ª–µ–Ω—ñ –∑–≤'—è–∑–∫–∏ –º—ñ–∂ –∞–∫—Ç–∞–º–∏ |
| `embeddings` | JSON | Embeddings –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É (–¥–∏–≤. —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∏–∂—á–µ) |
| `created_at` | DateTime(timezone) | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |
| `updated_at` | DateTime(timezone) | –î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è |

**–ó–≤'—è–∑–∫–∏:**
- `subset` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ –∑ `Subset`
- `categories` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö —á–µ—Ä–µ–∑ `ActCategory`
- `relations` ‚Üí –æ–¥–∏–Ω-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –∑ `ActRelation` (—è–∫ source)
- `inverse_relations` ‚Üí –æ–¥–∏–Ω-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –∑ `ActRelation` (—è–∫ target)

**–Ü–Ω–¥–µ–∫—Å–∏:**
- `nreg` - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É

---

### 4. –¢–∞–±–ª–∏—Ü—è `act_categories` (–ó–≤'—è–∑–æ–∫ –∞–∫—Ç-–∫–∞—Ç–µ–≥–æ—Ä—ñ—è)

**–û–ø–∏—Å:** –ë–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –∑–≤'—è–∑–æ–∫ –º—ñ–∂ –∞–∫—Ç–∞–º–∏ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å |
|---------|-----|------|
| `id` | Integer (PK) | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä |
| `act_id` | Integer (FK) | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `legal_acts.id` |
| `category_id` | Integer (FK) | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `categories.id` |
| `confidence` | Integer | –í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å (0-100, default: 100) |

**–ó–≤'—è–∑–∫–∏:**
- `legal_act` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ –∑ `LegalAct`
- `category` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ –∑ `Category`

---

### 5. –¢–∞–±–ª–∏—Ü—è `act_relations` (–ó–≤'—è–∑–∫–∏ –º—ñ–∂ –∞–∫—Ç–∞–º–∏)

**–û–ø–∏—Å:** –í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –º—ñ–∂ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤–∏–º–∏ –∞–∫—Ç–∞–º–∏

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å |
|---------|-----|------|
| `id` | Integer (PK) | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä |
| `source_act_id` | Integer (FK) | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `legal_acts.id` (–¥–∂–µ—Ä–µ–ª–æ) |
| `target_act_id` | Integer (FK) | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `legal_acts.id` (—Ü—ñ–ª—å) |
| `relation_type` | String(100) | –¢–∏–ø –∑–≤'—è–∑–∫—É (–ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è, –∑–º—ñ–Ω—é—î, —Å–∫–∞—Å–æ–≤—É—î, —Ç–æ—â–æ) |
| `description` | Text | –û–ø–∏—Å –∑–≤'—è–∑–∫—É |
| `confidence` | Integer | –í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å (0-100, default: 100) |
| `created_at` | DateTime(timezone) | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

**–ó–≤'—è–∑–∫–∏:**
- `source_act` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ –∑ `LegalAct` (—è–∫ source)
- `target_act` ‚Üí –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ –∑ `LegalAct` (—è–∫ target)

**–¢–∏–ø–∏ –∑–≤'—è–∑–∫—ñ–≤:**
- `–ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è` - –∞–∫—Ç –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ —ñ–Ω—à–∏–π –∞–∫—Ç
- `–∑–º—ñ–Ω—é—î` - –∞–∫—Ç –∑–º—ñ–Ω—é—î —ñ–Ω—à–∏–π –∞–∫—Ç
- `—Å–∫–∞—Å–æ–≤—É—î` - –∞–∫—Ç —Å–∫–∞—Å–æ–≤—É—î —ñ–Ω—à–∏–π –∞–∫—Ç
- `–¥–æ–ø–æ–≤–Ω—é—î` - –∞–∫—Ç –¥–æ–ø–æ–≤–Ω—é—î —ñ–Ω—à–∏–π –∞–∫—Ç
- `—Ä–µ–∞–ª—ñ–∑—É—î` - –∞–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î —ñ–Ω—à–∏–π –∞–∫—Ç
- `–∑–∞–º—ñ–Ω—é—î` - –∞–∫—Ç –∑–∞–º—ñ–Ω—é—î —ñ–Ω—à–∏–π –∞–∫—Ç

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –ø–æ–ª—ñ–≤

### `extracted_elements` (JSON)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö, –≤–∏–¥—ñ–ª–µ–Ω–∏—Ö OpenAI –∑ —Ç–µ–∫—Å—Ç—É –∞–∫—Ç—É:

```json
{
  "categories": [
    {
      "name": "–ù–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó",
      "description": "–û–ø–∏—Å –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó"
    }
  ],
  "subsets": [
    {
      "name": "–ù–∞–∑–≤–∞ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏",
      "category": "–ù–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó",
      "description": "–û–ø–∏—Å –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏"
    }
  ],
  "elements": [
    {
      "type": "–°—Ç–∞—Ç—Ç—è",
      "number": "1",
      "title": "–ù–∞–∑–≤–∞ —Å—Ç–∞—Ç—Ç—ñ",
      "text": "–¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—Ç—ñ",
      "subelements": [
        {
          "type": "–ü—É–Ω–∫—Ç",
          "number": "1",
          "text": "–¢–µ–∫—Å—Ç –ø—É–Ω–∫—Ç—É"
        }
      ]
    }
  ],
  "relations": [
    {
      "type": "–ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è",
      "target_nreg": "4170-IX",
      "description": "–û–ø–∏—Å –∑–≤'—è–∑–∫—É"
    }
  ],
  "metadata": {
    "extraction_date": "2026-01-03T11:00:00Z",
    "model": "gpt-4o",
    "chunks_processed": 3
  }
}
```

**–ü–æ–ª—è:**
- `categories` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π, –¥–æ —è–∫–∏—Ö –Ω–∞–ª–µ–∂–∏—Ç—å –∞–∫—Ç
- `subsets` - —Å–ø–∏—Å–æ–∫ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω
- `elements` - –≤–∏–¥—ñ–ª–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ (—Å—Ç–∞—Ç—Ç—ñ, –ø—É–Ω–∫—Ç–∏, –ø—ñ–¥–ø—É–Ω–∫—Ç–∏)
- `relations` - –∑–≤'—è–∑–∫–∏ –∑ —ñ–Ω—à–∏–º–∏ –∞–∫—Ç–∞–º–∏
- `metadata` - –º–µ—Ç–∞–¥–∞–Ω—ñ –æ–±—Ä–æ–±–∫–∏

---

### `extracted_relations` (JSON)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏—è–≤–ª–µ–Ω–∏—Ö –∑–≤'—è–∑–∫—ñ–≤:

```json
[
  {
    "type": "–ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è",
    "target_nreg": "4170-IX",
    "description": "–ê–∫—Ç –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ –ó–∞–∫–æ–Ω –£–∫—Ä–∞—ó–Ω–∏ –ø—Ä–æ...",
    "confidence": 95
  }
]
```

---

### `embeddings` (JSON)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ embeddings –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É:

```json
{
  "embeddings": [
    [0.123, -0.456, 0.789, ...],  // Vector 1 (3072 dimensions)
    [0.234, -0.567, 0.890, ...],  // Vector 2
    ...
  ],
  "chunks": [
    {
      "text": "–¢–µ–∫—Å—Ç —á–∞–Ω–∫—É",
      "chunk_index": 0,
      "start": 0,
      "end": 40000,
      "total_chunks": 5
    }
  ],
  "model": "text-embedding-3-large",
  "dimensions": 3072,
  "total_chunks": 5
}
```

**–ü–æ–ª—è:**
- `embeddings` - –º–∞—Å–∏–≤ –≤–µ–∫—Ç–æ—Ä—ñ–≤ embeddings (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ chunk)
- `chunks` - –º–µ—Ç–∞–¥–∞–Ω—ñ —á–∞–Ω–∫—ñ–≤ (—Ç–µ–∫—Å—Ç, –ø–æ–∑–∏—Ü—ñ—ó, —ñ–Ω–¥–µ–∫—Å–∏)
- `model` - –º–æ–¥–µ–ª—å, —è–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∞—Å—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
- `dimensions` - —Ä–æ–∑–º—ñ—Ä–Ω—ñ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä—ñ–≤ (3072 –¥–ª—è text-embedding-3-large)
- `total_chunks` - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞–Ω–∫—ñ–≤

---

### `text_json` —Ç–∞ `card_json` (JSON)

–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –∑ API –í–µ—Ä—Ö–æ–≤–Ω–æ—ó –†–∞–¥–∏ –£–∫—Ä–∞—ó–Ω–∏:

**`text_json`** - –ø–æ–≤–Ω–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞
**`card_json`** - –∫–∞—Ä—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏

---

## üîó ER-–¥—ñ–∞–≥—Ä–∞–º–∞ (PostgreSQL)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Category   ‚îÇ
‚îÇ  (–ú–Ω–æ–∂–∏–Ω–∞)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ 1
       ‚îÇ
       ‚îÇ *
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Subset    ‚îÇ
‚îÇ(–ü—ñ–¥–º–Ω–æ–∂–∏–Ω–∞) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ 1
       ‚îÇ
       ‚îÇ *
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   LegalAct      ‚îÇ
‚îÇ (–ï–ª–µ–º–µ–Ω—Ç)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ *
       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ActCategory    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  Category    ‚îÇ
‚îÇ  (Many-to-Many) ‚îÇ      ‚îÇ  (–ú–Ω–æ–∂–∏–Ω–∞)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ActRelation    ‚îÇ
‚îÇ  (–ó–≤'—è–∑–∫–∏)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ‚îÇ
    ‚îÇ *       ‚îÇ *
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇSource ‚îÇ  ‚îÇTarget ‚îÇ
‚îÇ Act   ‚îÇ  ‚îÇ Act   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üåê Neo4j Graph Schema

### –í—É–∑–ª–∏ (Nodes)

#### 1. `Category` (–ú–Ω–æ–∂–∏–Ω–∞)

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
- `id` (Integer) - ID –∑ PostgreSQL
- `name` (String) - –ù–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- `element_count` (Integer) - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- `type` (String) - "Category"

**–ü—Ä–∏–∫–ª–∞–¥:**
```cypher
(:Category {id: 1, name: "–ë–∞–Ω–∫–∏, —Ñ—ñ–Ω–∞–Ω—Å–∏, –∫—Ä–µ–¥–∏—Ç, –±—é–¥–∂–µ—Ç", element_count: 15663, type: "Category"})
```

---

#### 2. `Subset` (–ü—ñ–¥–º–Ω–æ–∂–∏–Ω–∞)

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
- `id` (Integer) - ID –∑ PostgreSQL
- `name` (String) - –ù–∞–∑–≤–∞ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏
- `type` (String) - "Subset"

**–ü—Ä–∏–∫–ª–∞–¥:**
```cypher
(:Subset {id: 1, name: "–ë–∞–Ω–∫—ñ–≤—Å—å–∫–µ –∑–∞–∫–æ–Ω–æ–¥–∞–≤—Å—Ç–≤–æ", type: "Subset"})
```

---

#### 3. `LegalAct` (–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤–∏–π –∞–∫—Ç)

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
- `id` (Integer) - ID –∑ PostgreSQL
- `nreg` (String) - –ù–æ–º–µ—Ä —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- `title` (String) - –ù–∞–∑–≤–∞ –∞–∫—Ç—É
- `type` (String) - "LegalAct"

**–ü—Ä–∏–∫–ª–∞–¥:**
```cypher
(:LegalAct {id: 1, nreg: "4170-IX", title: "–ó–∞–∫–æ–Ω –£–∫—Ä–∞—ó–Ω–∏ –ø—Ä–æ...", type: "LegalAct"})
```

---

### –ó–≤'—è–∑–∫–∏ (Relationships)

#### 1. `BELONGS_TO` (–ù–∞–ª–µ–∂–∏—Ç—å –¥–æ)

**–í—ñ–¥:** `Subset` ‚Üí **–î–æ:** `Category`
- –ü—ñ–¥–º–Ω–æ–∂–∏–Ω–∞ –Ω–∞–ª–µ–∂–∏—Ç—å –¥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

**–í—ñ–¥:** `LegalAct` ‚Üí **–î–æ:** `Subset`
- –ê–∫—Ç –Ω–∞–ª–µ–∂–∏—Ç—å –¥–æ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏

---

#### 2. `IN_CATEGORY` (–í –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó)

**–í—ñ–¥:** `LegalAct` ‚Üí **–î–æ:** `Category`
- –ê–∫—Ç –Ω–∞–ª–µ–∂–∏—Ç—å –¥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (–ø—Ä—è–º–∏–π –∑–≤'—è–∑–æ–∫)

---

#### 3. –¢–∏–ø–∏ –∑–≤'—è–∑–∫—ñ–≤ –º—ñ–∂ –∞–∫—Ç–∞–º–∏:

- `REFERENCES` (–ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è)
- `MODIFIES` (–∑–º—ñ–Ω—é—î)
- `CANCELS` (—Å–∫–∞—Å–æ–≤—É—î)
- `SUPPLEMENTS` (–¥–æ–ø–æ–≤–Ω—é—î)
- `IMPLEMENTS` (—Ä–µ–∞–ª—ñ–∑—É—î)
- `REPLACES` (–∑–∞–º—ñ–Ω—é—î)
- `RELATED_TO` (–ø–æ–≤'—è–∑–∞–Ω–∏–π –∑) - –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–í—ñ–¥:** `LegalAct` ‚Üí **–î–æ:** `LegalAct`

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
- `description` (String) - –û–ø–∏—Å –∑–≤'—è–∑–∫—É
- `confidence` (Integer) - –í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å (0-100)
- `relation_type` (String) - –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ç–∏–ø –∑–≤'—è–∑–∫—É

**–ü—Ä–∏–∫–ª–∞–¥:**
```cypher
(:LegalAct {id: 1})-[r:REFERENCES {description: "–ü–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞", confidence: 95, relation_type: "–ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è"}]->(:LegalAct {id: 2})
```

---

## üìä –ì—Ä–∞—Ñ–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Neo4j)

```
Category (–ú–Ω–æ–∂–∏–Ω–∞)
  ‚îÇ
  ‚îú‚îÄ[:BELONGS_TO]
  ‚îÇ
  Subset (–ü—ñ–¥–º–Ω–æ–∂–∏–Ω–∞)
    ‚îÇ
    ‚îú‚îÄ[:BELONGS_TO]
    ‚îÇ
    LegalAct (–ê–∫—Ç)
      ‚îÇ
      ‚îú‚îÄ[:IN_CATEGORY]‚Üí Category
      ‚îÇ
      ‚îú‚îÄ[:REFERENCES]‚Üí LegalAct
      ‚îú‚îÄ[:MODIFIES]‚Üí LegalAct
      ‚îú‚îÄ[:CANCELS]‚Üí LegalAct
      ‚îî‚îÄ[:RELATED_TO]‚Üí LegalAct
```

---

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è PostgreSQL ‚Üî Neo4j

**–ü—Ä–æ—Ü–µ—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

1. **–ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó:**
   - PostgreSQL: INSERT/UPDATE –≤ `categories`
   - Neo4j: MERGE `Category` node

2. **–ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏:**
   - PostgreSQL: INSERT/UPDATE –≤ `subsets`
   - Neo4j: MERGE `Subset` node + `BELONGS_TO` ‚Üí `Category`

3. **–ü—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ –∞–∫—Ç—É:**
   - PostgreSQL: UPDATE `legal_acts` (extracted_elements, is_processed)
   - Neo4j: MERGE `LegalAct` node + –∑–≤'—è–∑–∫–∏ –∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏/–ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∞–º–∏

4. **–ü—Ä–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—ñ –∑–≤'—è–∑–∫—ñ–≤:**
   - PostgreSQL: INSERT –≤ `act_relations`
   - Neo4j: CREATE relationship –º—ñ–∂ `LegalAct` nodes

---

## üìà –Ü–Ω–¥–µ–∫—Å–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

### PostgreSQL

- `legal_acts.nreg` - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É
- `categories.name` - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å
- `subsets.category_id` - —ñ–Ω–¥–µ–∫—Å –¥–ª—è JOIN –æ–ø–µ—Ä–∞—Ü—ñ–π

### Neo4j

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏ –Ω–∞ `id` –¥–ª—è –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ –≤—É–∑–ª—ñ–≤
- –Ü–Ω–¥–µ–∫—Å–∏ –Ω–∞ `nreg` –¥–ª—è `LegalAct` nodes

---

## üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ö–µ–º

### PostgreSQL –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ –°–∫–ª–∞–¥–Ω—ñ SQL-–∑–∞–ø–∏—Ç–∏
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–æ–≤–Ω–∏—Ö —Ç–µ–∫—Å—Ç—ñ–≤ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è embeddings (JSON)

### Neo4j –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è:
- ‚úÖ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ—ñ–≤ –∑–≤'—è–∑–∫—ñ–≤
- ‚úÖ GraphRAG (–≥—Ä–∞—Ñ–æ–≤–∏–π –ø–æ—à—É–∫)
- ‚úÖ –ê–Ω–∞–ª—ñ–∑ –∑–≤'—è–∑–∫—ñ–≤ –º—ñ–∂ –∞–∫—Ç–∞–º–∏
- ‚úÖ –®–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ —à–ª—è—Ö—ñ–≤ –º—ñ–∂ –≤—É–∑–ª–∞–º–∏
- ‚úÖ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ —ó—Ö –∑–≤'—è–∑–∫—ñ–≤

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **–î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö:** API –í–µ—Ä—Ö–æ–≤–Ω–æ—ó –†–∞–¥–∏ –£–∫—Ä–∞—ó–Ω–∏ (data.rada.gov.ua)
2. **–û–±—Ä–æ–±–∫–∞:** OpenAI API –¥–ª—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –∑–≤'—è–∑–∫—ñ–≤
3. **Embeddings:** OpenAI text-embedding-3-large (3072 dimensions)
4. **Chunking:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ (—Ä–æ–∑–¥—ñ–ª–∏ ‚Üí —á–∞—Å—Ç–∏–Ω–∏ ‚Üí —Å—Ç–∞—Ç—Ç—ñ)

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2026-01-03

